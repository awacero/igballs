#  Diseño del Sistema

**Nombre del proyecto: IGBALLS**  

**Visualización 3D del mecanismo de falla del terremoto de Pedernales (Mw 7.8, 2016)**

---

##  Estructura del Proyecto

igballs/  
├── igballs.py # Script principal de ejecución  
├── igballs_fault.py # Generación de la figura 3D  
├── igballs_balls.py # Función para generar la beachball  
├── igballs_functions.py # (referenciado, posible módulo para funciones auxiliares)  
└── docs/  
├── requerimientos.md  
├── analisis.md  
└── diseno.md  


---

## 🔄 Flujo del sistema

1. El usuario ejecuta `igballs.py`, donde se definen los parámetros `strike`, `dip`, `rake`.
2. Este script llama a `create_figure()` desde `igballs_fault.py`.
3. Dentro de `create_figure()`, se calculan vectores geométricos y se genera la escena 3D con Plotly.
4. Para representar la beachball, se llama a `create_beach_ball()` desde `igballs_balls.py`.
5. Se retorna una `go.Figure` animada e interactiva, con anotaciones y controles.

---

## 🧱 Módulos y responsabilidades

| Módulo                 | Responsabilidad principal                                     |
|------------------------|---------------------------------------------------------------|
| `igballs.py`           | Script principal; define parámetros y lanza la visualización  |
| `igballs_fault.py`     | Genera toda la figura 3D: cuñas, planos, animaciones, ejes    |
| `igballs_balls.py`     | Dibuja la beachball en el plano focal                         |
| `igballs_functions.py` | (pendiente) Funciones auxiliares reutilizables (a futuro)     |

---

## 🔧 Funciones principales

### En `igballs_fault.py`
- `create_figure(strike, dip, rake) -> go.Figure`: genera la escena 3D completa y la devuelve como objeto Plotly.

### En `igballs_balls.py`
- `create_beach_ball(center, strike_vec, dip_vec, normal_vec)`: genera una esfera coloreada según el mecanismo focal.

---

## 📊 Diagrama UML (Diseño Modular)

```plaintext
+--------------------+       +-------------------------+
|    igballs.py      |       |   igballs_fault.py      |
+--------------------+       +-------------------------+
| + main()           |       | + create_figure()       |
+--------------------+       +-------------------------+
        |                               |
        v                               v
+--------------------+       +-------------------------+
| igballs_balls.py   |       | igballs_functions.py*   |
+--------------------+       +-------------------------+
| + create_beach_ball|       | + funciones auxiliares  |
+--------------------+       +-------------------------+

(* = módulo sugerido a futuro)

```

##  Librerías utilizadas
numpy: para cálculo de vectores y geometría.

plotly.graph_objects: para renderizado 3D interactivo.

scipy.spatial.transform.Rotation (en versiones anteriores, si usas rotaciones).

## Diseño visual
Se utiliza Plotly Mesh3d, Surface, Cone y Scatter3d para crear:

Placas tectónicas

Plano de falla

Beachball

Vectores cardinales

Animación del bloque en movimiento

## Posibles mejoras futuras
Modularizar funciones repetidas en igballs_functions.py

Separar configuraciones (ej. parámetros visuales) en un archivo .ini o .yaml

Exportar figura como HTML o video

Crear interfaz web con Dash o Streamlit

## Justificación del diseño

El diseño orientado a módulos facilita:

El mantenimiento del código

La reusabilidad de funciones como create_beach_ball

La extensión del sistema para visualizar otros sismos o mecanismos


